
    <!-- nav bar -->
    <%- include('partials/includes/header') %>
    <%- include('partials/includes/navbar') %>


    <br /> <br /> <br /> <br />

   

   
    <div class="container-fluid fixed-bottom bg-transparent" style="background-color:#F4F6F6">
            <div class="row" style="padding:10px">
             <ul class="list-group">
              <li style="padding-bottom:10px">
                <a href=""><img src="../public/image/Twitter_UI-18-512.png" alt="" class="rounded-circle border border-danger" style="width:50px; height:50px"></a>
                <a href=""><img src="../public/image/messageicon1.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:50px; height:50px"></a>
                <a href=""><img src="../public/image/notificationicon.png" alt="" class="img-fluid rounded-circle border border-danger" style="width:50px; height:50px"></a>
              </li> 					   
             </ul>        
            </div>
           </div>
           
       
        <div class="container-fluid fixed" style="background-color:#F4F6F6">
         <div class="row" style="padding:10px">
          <ul class="list-group">
           <li style="padding-bottom:10px">
            
             <button class="rounded-circle border border-danger"  style="width:100px; height:100px">
              <i class="fa fa-plus"></i>
             </button>
             <a href=""><img src="../public/image/1.jpg" alt="" class="rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/3.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/4.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/5.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/6.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/7.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/8.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/9.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/10.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/11.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/1.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/4.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
             <a href=""><img src="../public/image/5.jpg" alt="" class="img-fluid rounded-circle border border-danger" style="width:100px; height:100px"></a>
            
           </li> 					   
          </ul>
          
         
         </div>
        </div>
    
            
    

    <div class="container" style="padding-top:40px"><!-- main container starts-->

        <div class="row"><!-- main row starts -->

          <!-- ................................ Left side bar ............................... -->
        <% if (user.length > 0)
        { %>
          <div class="col-md-2"> <!-- col-md-2 starts-->

                <!-- for loop starts here -->
                <% user.forEach(function(item,  index)
                {%>
            <div class="card mb-3">
                    <div class="card-body">
                        <ul class="nav">
                                <li class="card-body">      

                                        <div class="row">
                                        <% if(item.user_profile_pic){ %>
                                                <img  src="../public/profile_image/<%= item.user_profile_pic %>" alt="profile image" class="rounded-circle border border-danger" style="width:100px; height:100px">
                                        <% } else { %>
                                                <img  src="../public/profile_image/icon.jpg" alt="profile image 1" class="rounded-circle border border-danger" style="width:100px; height:100px">
                                        <% } %>
                                
                                                <h6><%= item.user_firstname %> <%= item.user_lastname %></h6>
                                                <p>Love U Dear Zindgi</p>
                                        </div>                                                                           
                                </li>
                                <ul class="list-group list-group-flush">
                                        <li class="list-group-item">Followers 100</li>
                                        <li class="list-group-item">Following 200</li>
                                </ul>
                        </ul>          
                    </div>

            </div>  
              <!--/sidebar-nav-fixed -->

              <div class="card mb-3">
                    <div class="card-body">
                            <ul class="nav list-group list-group-flush">
                                <li>      
                                    <h6>Dashboard</h6>
                                    <h6>New Group</h6>                    
                                </li>
                        </ul>          
                    </div>

            </div>

            <div class="card mb-3">
                    <div class="card-body">
                            <ul class="nav list-group list-group-flush">
                                <li> View More</li>
                        </ul>          
                    </div>

            </div>
            <%}); %> <!-- for loop ends here -->
              <!-- you can add one more side bar here -->
              <!-------------------------------------------------------------------------------------------------->
            </div> <!-- col-md-2 ends-->
        <%}<!-- if ends here -->
        else
        {%> 
                <p> <strong>There are no recods available</strong></p>
        <%}%><!-- else ends here -->

          
            

            <!-- /////////////////////////////////////////////////////////////////////////////////////// -->
                                            <!-- adding main middle page -->
            <!-- /////////////////////////////////////////////////////////////////////////////////////// -->


            
            <div class="col-md-6">

                    <div class="card">
                            <div class="card-body">
                                    <% if (user.length > 0)
                                    {%>
                                        <% user.forEach(function(item, index)
                                        { %>
                                                <% if (item.user_profile_pic)
                                                { %>
                                                        <a href=""><img src="../public/profile_image/<%= item.user_profile_pic %>" alt="" class="rounded-circle border border-danger" style="width:50px; height:50px"></a>
                                                        
                                                <%} else 
                                                {%>
                                                        <a href=""><img src="../public/image/1.jpg" alt="" class="rounded-circle border border-danger" style="width:50px; height:50px"></a>
                                                <%}%>
                                                <button class="btn btn-light" style="position: absolute;right:150px;" data-target="#createpost" data-toggle="modal">Create Post</button>
                                                <a href="#" class="btn btn-dark"style="position: absolute;right:0;">Create Video</a>

                                        <%})%>
                                        
                                    <%} else{%>

                                    <%}%>
                              
                            </div>
                    </div>
                    <!--  pop-up page for creating a event or post -->

                    <div class="modal fade" id="createpost" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  <form action="http://localhost:4000/posts" method="post" enctype="multipart/form-data">
                                    <div class="form-group">
                                            <textarea name="message" maxlength="120" class="form-control body" placeholder="message"></textarea>
                                      </div>
                                      
                                      <div class="form-group">
                                          <label for="upload" name="uploadPost">Upload Photo</label>
                                          <input type="file" name="feedsposts" class="upload" />
                                          <div class="progress">
                                              <div class="progress-bar" role="progressbar"  aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                          </div>
                                      </div>
                                      
                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  <button type="submit" name="Share" class="btn btn-primary">Post</button>
                                </div>
                            </form>
                              </div>
                            </div>
                          </div>
                    <!--  pop-up page for creating a event or post------END--- -->
                <hr> 
                
                <input class="form-control" type="text" placeholder="View Feeds By" aria-label="Search">
                <hr> 

                <!-- Suggestions box -->
                <% if (user.length > 0){ %>
                <% user.forEach(function(item,  index){%>
                <div class="card mb-4" id="suggestions_box" data-userid="<%=item.user_id%>">
                        <div class="card-header">Suggestions</div>
                        <div class="card-body">
                            <ul class="nav">
                                    <li class="card-body text-center">
                                        <div class="row" id="slides" data-userid="<%=item.user_id%>">
                                                <!-- users displayed from server side using ajax-->
                                        </div>
                                      
                                    </li>
                            </ul>          
                        </div>
                </div>
                <%}); %>
                <%}%>
                      
                

                
                 
                                    <% if (items.length > 0)
                                    { %>
                                      <% items.forEach(function(item,  index)
                                      {%>

                                    
                                            
                                        <div class="card mb-3">
                                                <div class="card-header">
                                                        <% if(item.User.user_profile_pic){ %>
                                                                <a href=""><img src="../public/profile_image/<%= item.User.user_profile_pic %>" alt="" class="rounded-circle border border-danger" style="width:50px; height:50px"></a>
                                                            
                                                        <% } else { %>
                                                            <img src="../public/profile_image/icon.jpg" alt="profile image 1" class="rounded-circle border border-danger" style="width:50px; height:50px">
                                                      <% } %>

                                                      <span class="ml-2" style="color:rgba(0,0,0,0.5)"><%= item.User.user_firstname%> <%= item.User.user_lastname%></span>
                                                </div>
                                                
                                                <div class="card-body">
                                                    <ul class="nav">
                                                            <li>
                                                                    <a href="/post/<%= item.event_id %>">
                                                                        <img src="../public/image/<%= item.e_imagepath %>" alt="error check >" class="img-fluid">
                                                                    </a>
                                                              
                                                            </li>
                                                    </ul>          
                                                </div>
                                                <div class="card-footer">
                                                        <% if(item.event_id != -1){ %>
                                                                <button class="like bg-btn fa fa-thumbs-up" data-post="<%= item.event_id %>"></button>
                                                                <span class="countLikes" id="countLikes<%= item.event_id %>"><%=item.Likes.length%></span>
                                                                
                                                        <% }
                                                        else{ %>
                                                                <button class="like bg-btn fa fa-thumbs-up" style="color:#0275d8;" data-post="<%= item.event_id %>"></button>
                                                                <span class="countLikes" id="countLikes<%= item.event_id %>"><%=item.Likes.length%></span>
                                                                <span class="countLikes" style="display:none" data-post_count="<%= item.event_id %>"><%=item.Likes.length%></span>
                                                        <% } %>
                                                               
                                                        <!-- <button class="like bg-btn fa fa-thumbs-up" style="color:#0275d8;" data-post="<%= item.event_id%>"></button> -->
                                                        <!-- <span class="toggle_likes" data-postID="<%= item.event_id %>">Like</span> -->
                                                        <button class="post_comment bg-btn fa fa-comments" id="<%= item.event_id %>"></button>
                                                        <!-- <i class="far fa-comments"></i> -->
                                                        <span class="countComments"><%=item.Comments.length%></span>

                                                </div>
                                                
                                        </div> 
                                        <!-- new display comments hiden-->
                                        <div id="comment_form<%= item.event_id %>" style="display:none;">
                                        
                                        <span id="old_comment<%= item.event_id %>"></span>
                                                        <div class="form-group">
                                                                <textarea name="comment" class="form-control" id="comment<%= item.event_id %>"></textarea>
                                                        </div>
                                                        <div class="form-group">
                                                                <button type="button" data-po="<%= item.event_id %>" name="submit_comment" class="btn btn-primary btn-xs submit_comment">Comment</button>
                                                        </div>
                                                        </div>         
          
                                        <%}); %>
                                    <%}
                                    else
                                    {
                                      %> 
                                      <p> <strong>There are no recods available</strong></p>
                                  <%  } %>
                
                
               
            </div>

            <!-- /////////////////////////////////////////////////////////////////////////////////////// -->
                                            <!-- main middle page ends -->
            <!-- /////////////////////////////////////////////////////////////////////////////////////// -->

            <div class="col-md-4">
                
                <div class="card mb-3">
                        <div class="card-header bg-transparent">
                            <div class="row">
                                    <div class="form-group col-md-9">
                                            <input class="form-control" type="text" placeholder="Find Events" aria-label="Search">
                                      </div>
                                      <div class="form-group col-md-3">
                                            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Find</button>
                                      </div>
                            </div>

                        </div>
                        <div class="card-body">
                        
                          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Today</button>
                          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Tommarow</button>
                          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">This Week</button>
                        </div>
                    

                </div>

                <div class="card mb-3">
                        <div class="card-header bg-transparent">Events</div>
                        <div class="card-body">
                            <ul class="nav">
                                    <li class="card-body">        
                                                    <a href=""><img src="../public/image/Upcoming-Events.png" alt="" class="rounded-circle border border-danger" style="width:100px; height:100px;"></a>
                                                    Upcoming Events
                                                    <a href=""><img src="../public/image/activeevents.png" alt="" class="rounded-circle border border-danger" style="width:100px; height:100px"></a>
                                                    Active Events
                                                    <a href=""><img src="../public/image/pastevents.png" alt="" class="rounded-circle border border-danger" style="width:100px; height:100px"></a>
                                                    Previous Events
                                      
                                    </li>
                            </ul>          
                        </div>
                        <div class="card-footer bg-transparent">View More</div>
                      </div>

                    <div class="card mb-3">
                        <div class="card-header bg-transparent">Remended Events For You</div>
                        <div class="card-body">
                            <ul class="nav">
                                    <li class="card-body">
                                           <div class="row">       

                                            <div class="col-lg-3">
                                                    <a href=""><img src="../public/image/newevents.jpg" alt="" class="rounded-circle border border-danger" style="width:100px; height:100px"></a>
                                            </div>
                                            <div class="col-lg-3">
                                                    <a href=""><img src="../public/image/jazzyb.jpg" alt="" class="rounded-circle border border-danger" style="width:100px; height:100px"></a>
                                            </div>
                                            <div class="col-lg-3">
                                                    <a href=""><img src="../public/image/6.jpg" alt="" class="rounded-circle border border-danger" style="width:100px; height:100px"></a>
                                            </div>
                                            <div class="col-lg-3">
                                                    <a href=""><img src="../public/image/1.jpg" alt="" class="rounded-circle border border-danger" style="width:100px; height:100px"></a>
                                            </div>
                                            

                                        </div>
                                      
                                    </li>
                            </ul>          
                        </div>
                        <div class="card-footer bg-transparent">View More
                      </div>


                <!--/sidebar-nav-fixed -->
            </div>
          
        </div><!-- main row ends -->
    </div>
    <%- include('partials/includes/footer') %>


<script>
    
$(document).ready(function() // main script starts
{
        // ...........................................................................  All METHODS  ....................................................................// 
        
        
        // Get all users from database (hint: for follow or unfollow) (display all user for suggestion to follow)
        var user_id = 0; 
        get_user_id();
        

        function get_user_id()
        {
                $.ajax(
                {
                        url:"/posts/user_id",
                        method:"GET",
                        success:function(response)
                        {       
                                if(response !='')
                                {
                                        user_id = Number(response)
                                        alert(user_id)
                                        //return response;
                                }
                        },
                        error: function(jqXHR, textStatus, errorThrown)
                                {
                                        console.log('jqXHR:');
                                        console.log(jqXHR);
                                        console.log('textStatus:');
                                        console.log(textStatus);
                                        console.log('errorThrown:');
                                        console.log(errorThrown);
                                        alert(errorThrown);
                        }
                });
        }
                

        
        fetch_user(); // calling fetch_user() functin when page loads
        //fetch_user();
        function fetch_user()
        {
                const action = "fetch_user";
                //const user_id = $(this).attr("user_id");
                //alert(d)
                $.ajax(
                {
                        url:"/posts/get_user",
                        method:"GET",
                        success:function(response)
                        {       

                                if(response.length > 0)
                                {
                                        
                                        var suggestion_for_user = document.getElementById("slides")

                                       
                                        for (var i = 0, len = response.length; i < len; i++)
                                        {       var flag = false
                                                var status =""
                                                let fullname = response[i].user_firstname + ' ' + response[i].user_lastname;
                                                let image = response[i].user_profile_pic 
                                                let userid = response[i].user_id;
                                                for(var j = 0, len_follow = response[i].Follows.length; j < len_follow; j++)
                                                {
                                                       
                                                       status =  response[i].Follows[j].status
                                                       alert(status)
                                                       var receiver_id =  response[i].Follows[j].receiver_id
                                                       var follow_user_id = response[i].Follows[j].user_id
                                                       var follow_receiver_id = response[i].Follows[j].receiver_id
                                                       
                                                       if((status == "requested") && (user_id == follow_user_id)) // When I send request to someone then I must see "Requested"
                                                       {
                                                                status="Requested" // not working
                                                                //alert(status)
                                                       }
                                                       else if((status == "requested") && (user_id == follow_receiver_id)) // when someone else sends me request then 2 option "Accept" or "Decline"
                                                       {
                                                               status = "Accept"
                                                              // alert(status)
                                                       }
                                                       else if((status == "accept") && ((user_id == follow_receiver_id))) // when either one user accespts the request then show "Following" to both user
                                                       {
                                                               status = "Following"
                                                               //alert(status)
                                                       }
                                                       else // when non of the condition satisfy then show "Follow" or // When no status then show "Follow"
                                                       {
                                                               status = "Follow"
                                                
                                                       }
                                                       if((user_id == follow_receiver_id) && (status !=""))
                                                       {
                                                               flag = true
                                                        suggestion_for_user.innerHTML =  suggestion_for_user.innerHTML + 
                        `<div class="card col-lg-4" data-user_id="${user_id}">
                                
                                <img src="../public/profile_image/"${image} alt="" class="rounded-circle border border-danger" style="width:60px; height:60px"/>
                                <p style="font-size:10px;"><strong>${fullname}</strong></p>
                                <button data-action="${status}" data-sender_id="${userid}" class="btn-post mr-2 btn btn-dark followbtn" style="font-size:6px;" type="button">${status}</button>
                                <button class="btn-post mr-2 btn btn-success" style="font-size:6px;" type="button">message</button>
                                <a href="#"> <div id="viewprofile${userid}" class="card-footer bg-transparent">View Profile</div></a>
                        </div>`;

                                                       }
                                        
                                                }
                                                if(status == "") 
                                                {
                                                        if(flag != true)
                                                        {

                                                        
                                                                status = "Follow";
                                                                suggestion_for_user.innerHTML =  suggestion_for_user.innerHTML + 
                        `<div class="card col-lg-4" data-user_id="${user_id}">
                                
                                <img src="../public/profile_image/"${image} alt="" class="rounded-circle border border-danger" style="width:60px; height:60px"/>
                                <p style="font-size:10px;"><strong>${fullname}</strong></p>
                                <button data-action="${status}" data-sender_id="${userid}" class="btn-post mr-2 btn btn-dark followbtn" style="font-size:6px;" type="button">${status}</button>
                                <button class="btn-post mr-2 btn btn-success" style="font-size:6px;" type="button">message</button>
                                <a href="#"> <div id="viewprofile${userid}" class="card-footer bg-transparent">View Profile</div></a>
                        </div>`;
                }
                                                }
                                                else{
                                                        if(flag != true)
                                                        {
                                                                
                                                        
                                                
                        suggestion_for_user.innerHTML =  suggestion_for_user.innerHTML + 
                        `<div class="card col-lg-4" data-user_id="${user_id}">
                                
                                <img src="../public/profile_image/"${image} alt="" class="rounded-circle border border-danger" style="width:60px; height:60px"/>
                                <p style="font-size:10px;"><strong>${fullname}</strong></p>
                                <button data-action="${status}" data-sender_id="${userid}" class="btn-post mr-2 btn btn-dark followbtn" style="font-size:6px;" type="button">${status}</button>
                                <button class="btn-post mr-2 btn btn-success" style="font-size:6px;" type="button">message</button>
                                <a href="#"> <div id="viewprofile${userid}" class="card-footer bg-transparent">View Profile</div></a>
                        </div>`;
                }
                }

       // suggestion_for_user.innerHTML =  suggestion_for_user.innerHTML + `<div class="jumbotron"><p class="lead">${fullname}</p><p>${userid}</p><p>${status}</p></div>`;
                                                
                                                
                                        }
                         
                                }
                        },
                        error: function(jqXHR, textStatus, errorThrown)
                                {
                                        console.log('jqXHR:');
                                        console.log(jqXHR);
                                        console.log('textStatus:');
                                        console.log(textStatus);
                                        console.log('errorThrown:');
                                        console.log(errorThrown);
                                        alert(errorThrown);
                               }
                });
                

        }// fetch_user() .........ends


        // follow a  user
        $(document).on('click', '.followbtn', function()
        {
                //var suggestion_box = $("#suggestion_box");
                //var slides = $("#slides")
               // alert("pppppppppppppppp")
                var sender_id =$(this).data('sender_id'); // get user_id to whom you want to send request
                var action = $(this).data('action') // status ..what you want to do follow or unfollow
                //alert(action)
                //var parent  = $(this)
                $.ajax({
                                url:"/posts/follow",
                                method:"POST",
                                data:{sender_id:sender_id,action:action},
                                success:function(response)
                                {
                                        if(response == "success")
                                        {
                                                alert("request has been sent")
                        //parent.html(<button data-action="${status}" data-sender_id="${userid}" class="btn-post mr-2 btn btn-dark followbtn" style="font-size:6px;" type="button">Requested</button>)
                                
                                        }
                                        
                                },
                                error: function(jqXHR, textStatus, errorThrown)
                                {
                                        console.log('jqXHR:');
                                        console.log(jqXHR);
                                        console.log('textStatus:');
                                        console.log(textStatus);
                                        console.log('errorThrown:');
                                        console.log(errorThrown);
                                        alert(errorThrown);
                               } 
                        })
                
        }); // follow a user ends


        
        // like post section
        $('.like').on('click', function(events)
        {
                event.preventDefault();
                event.stopPropagation();
                
                var postId = $(this).attr('data-post');
                var postId = parseInt(postId,10)
                //var parent  = $(this)
                $.ajax(
                        {
                                type: 'POST',
                                url:  '/posts/like/' + $(this).attr('data-post'),
                                contentType: "application/json", 
                                //data: JSON.stringify(data),
                                success : function(response)
                                {
                                        
                                        if(response == false)
                                        {
                                                alert("You have already liked this post")
                                        }
                                        else 
                                        {
                                                //parent.html(response.count)
                                                $('#countLikes'+postId).html(response.count);
                                        }
                                                
                                
                                },
                                error : function()
                                {
                                        alert('error from server');
                                }
                        }
                );
        })// like post ends 

        // on comment button clicked view all comments for particular post
        $(document).on('click', '.post_comment', function()
        {
                var post_id = $(this).attr('id')
                var action = 'fetch_all_comment';
                $.ajax(
                {
                        url:"/posts/fetch_add_comment",
                        method:"POST",
                        data:{post_id:post_id,action:action},
                        success:function(response)
                        {
                                let old_comment = document.getElementById("old_comment"+post_id)
                                old_comment.innerHTML = ""; // make it null first then populate data again
                                response.forEach(function(item, index)
                                { 
                                        var comment_data = item.comment
                                        //old_comment.append(document.createTextNode(comment_data));
                                        //$("#old_comment"+post_id).html(`<div class="jumbotron jumbotron-fluid"><p class="lead">${comment_data}</p></div>`);
                                        old_comment.innerHTML =  old_comment.innerHTML + `<div class="jumbotron"><p class="lead">${comment_data}</p></div>`;
                                        //document.getElementById("old_comment"+post_id).innerHTML=item.comment+document.getElementById("old_comment"+post_id).innerHTML;                              
                                })
                                        // document.getElementById("demo").innerHTML += '<br>' + employee.name;
                                        $('#comment_form'+post_id).slideToggle('slow');         
                        }

                
                });
        });

        
        // submit comment to server
        $(document).on('click', '.submit_comment', function()
        {
                var post_id = $(this).attr('data-po')
                var comment = $('#comment'+post_id).val();
                var action = 'submit_comment';
                        
                if(comment !='')
                {
                        $.ajax({
                                url:"/posts/add_comment",
                                method:"POST",
                                data:{post_id:post_id,comment:comment,action:action},
                                success:function(data)
                                {
                                        if(data == "success")
                                        {
                                                document.getElementById("comment"+post_id).value=""
                                                $('#comment_form'+post_id).slideUp('slow');
                                        }
                                        
                                },
                                error: function(jqXHR, textStatus, errorThrown)
                                {
                                        console.log('jqXHR:');
                                        console.log(jqXHR);
                                        console.log('textStatus:');
                                        console.log(textStatus);
                                        console.log('errorThrown:');
                                        console.log(errorThrown);
                                        alert(errorThrown);
                               } 
                        })
                }
                else{
                        alert("comment connot be empty");
                }

               
        });
    

}); // main script ends
</script>